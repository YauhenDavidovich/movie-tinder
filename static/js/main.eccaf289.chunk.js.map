{"version":3,"sources":["dll/movies.ts","bll/movies-reducer.ts","dll/recomedations.ts","components/TinderMovieCard.tsx","App.tsx","reportWebVitals.ts","bll/store.ts","index.tsx"],"names":["a","fetch","response","json","console","error","getMovies","initialState","axios","create","baseURL","TinderMovieCard","props","ref","childRefs","index","className","onSwipe","onCardLeftScreen","style","backgroundImage","movie","imageURL","title","App","alreadyRemoved","dispatch","useDispatch","moviesData","useSelector","state","movies","useMemo","Array","length","fill","map","i","React","createRef","useState","setMovies","reviewedFilms","setReviewedFilms","moviesState","useEffect","then","res","type","swiped","direction","id","push","outOfFrame","log","rejectMovieTC","acceptMovieTC","filter","swipe","dir","cardsLeft","includes","toBeRemoved","indexOf","current","onClick","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","action","store","createStore","applyMiddleware","thunkMiddleware","window","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mTAAA,4BAAAA,EAAA,+EAE8BC,MAAM,2BAFpC,cAEYC,EAFZ,gBAGsBA,EAASC,OAH/B,wEAMQC,QAAQC,MAAR,MANR,0D,sBAUeC,M,mDCETC,G,OCVWC,EAAMC,OAAO,CAC1BC,QACI,4CDQ+B,I,wBESxBC,EATS,SAACC,GACrB,OAAO,cAAC,IAAD,CAAYC,IAAKD,EAAME,UAAUF,EAAMG,OAAQC,UAAU,QAC7CC,QAASL,EAAMK,QAASC,iBAAkBN,EAAMM,iBAD5D,SAEH,qBAAKC,MAAO,CAACC,gBAAiB,OAASR,EAAMS,MAAMC,SAAW,KAAMN,UAAU,OAA9E,SACI,6BAAKJ,EAAMS,MAAME,aCwDdC,MAhEf,WACI,IAAIC,EAAiB,GACfC,EAAWC,cACXC,EAAaC,aAAgD,SAAAC,GAAK,OAAIA,EAAMC,UAC5EjB,EAAYkB,mBAAQ,kBAAMC,MAAML,EAAWM,QAAQC,KAAK,GAAGC,KAAI,SAAAC,GAAC,OAAIC,IAAMC,iBAAmB,CAACX,IAJzF,EAKiBY,mBAASZ,GAL1B,mBAKJG,EALI,KAKIU,EALJ,OAM+BD,mBAASf,GANxC,mBAMJiB,EANI,KAMWC,EANX,KAOPC,EAAchB,EAElBiB,qBAAU,WACNnB,GHcG,SAACA,GACJpB,IACKwC,MAAK,SAACC,GACHrB,EAT0C,CAACsB,KAAM,aAAcjB,OAS1CgB,YGhB9B,IAEHF,qBAAU,WACNJ,EAAUG,KACX,CAACA,IAGJ,IAAMK,EAAS,SAACC,EAAgBC,GAC5BT,EAAcU,KAAKD,GACnBR,EAAiBD,GAEjBW,EAAWF,GAEO,UAAdD,EHkBiB,SAACC,GAC1B/C,QAAQkD,IAAI,SAAUH,EAAG,oBGnBOI,CAAcJ,GHQrB,SAACA,GAC1B/C,QAAQkD,IAAI,SAAUH,EAAG,iBGT2BK,CAAcL,IAG5DE,EAAa,SAACF,GAChBP,EAAcA,EAAYa,QAAO,SAAApC,GAAK,OAAIA,EAAM8B,KAAOA,KACvDV,EAAUG,IAERc,EAAQ,SAACC,GACX,IAAMC,EAAY7B,EAAO0B,QAAO,SAAApC,GAAK,OAAKqB,EAAcmB,SAASxC,EAAM8B,OACvE,GAAIS,EAAU1B,OAAQ,CAAC,IAAD,IACZ4B,EAAcF,EAAUA,EAAU1B,OAAS,GAAGiB,GAC9CpC,EAAQa,EAAWQ,KAAI,SAAAf,GAAK,OAAIA,EAAM8B,MAAIY,QAAQD,GACxDrC,EAAe2B,KAAKU,GACpBnB,EAAiBlB,GACjB,UAAAX,EAAUC,UAAV,mBAAkBiD,eAAlB,SAA2BN,MAAMC,KAKzC,OACI,sBAAK3C,UAAU,MAAf,UACI,8CACA,qBAAKA,UAAU,gBAAf,SACK4B,EAAYR,KAAI,SAACf,EAAON,GAAR,OACb,cAAC,EAAD,CAAgCD,UAAWA,EAAWC,MAAOA,EAC5CE,QAAS,SAAC0C,GAAD,OAAcV,EAAOU,EAAKtC,EAAM8B,KACzCjC,iBAAkB,kBAAMmC,EAAWhC,EAAM8B,KAAK9B,MAAOA,GAFhDA,EAAM8B,SAKnCT,EAAcR,SAAWN,EAAWM,OAAS,sBAAKlB,UAAU,UAAf,UAC1C,wBAAQA,UAAU,gBAAgBiD,QAAS,kBAAMP,EAAM,SAAvD,oBACA,wBAAQ1C,UAAU,gBAAgBiD,QAAS,kBAAMP,EAAM,UAAvD,uBACK,6BAERhB,EAAcR,SAAWN,EAAWM,OAAS,oBAAIlB,UAAU,WAAd,kDAAqE,iECpDhHkD,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBtB,MAAK,YAAkD,IAA/CuB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,eCJRO,EAAcC,YAAgB,CAChC5C,OLQyB,WAAoF,IAAnFD,EAAkF,uDAAxDvB,EAAcqE,EAA0C,uCAC5G,OAAQA,EAAO5B,MACX,IAAK,aACD,OAAO4B,EAAO7C,OAAOK,KAAI,SAAAL,GAAM,sBAASA,MAC5C,IAAK,eAGL,QACI,OAAOD,MKbN+C,EAAQC,YAAYJ,EAAaK,YAAgBC,MAI9DC,OAAOJ,MAAQA,ECLfK,IAASC,OACP,cAAC,IAAMC,WAAP,UACI,cAAC,IAAD,CAAUP,MAAOA,EAAjB,SACF,cAAC,EAAD,QAGFQ,SAASC,eAAe,SAM1BpB,M","file":"static/js/main.eccaf289.chunk.js","sourcesContent":["async function getMovies() {\r\n    try {\r\n        let response =  await fetch('/movie-tinder/data.json');\r\n        return await  response.json();\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n}\r\n\r\nexport default getMovies\r\n\r\n\r\n","import {Dispatch} from 'redux'\r\nimport getMovies from \"../dll/movies\";\r\nimport {recomendationsAPI} from \"../dll/recomedations\";\r\n\r\nexport type MovieType = {\r\n    id:       string;\r\n    imageURL: string;\r\n    title:    string;\r\n    summary:  string;\r\n    rating:   number;\r\n}\r\n\r\nconst initialState: Array<MovieType> = []\r\n\r\nexport const moviesReducer = (state: Array<MovieType> = initialState, action: ActionsType): Array<MovieType> => {\r\n    switch (action.type) {\r\n        case 'SET-MOVIES':\r\n            return action.movies.map(movies => ({...movies}))\r\n        case 'ACCEPT-MOVIE':\r\n            return state\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setMoviesAC = (movies: Array<MovieType>) => ({type: 'SET-MOVIES', movies} as const)\r\nexport const acceptMoviesAC = (id: string) => ({type: 'ACCEPT-MOVIE', id} as const)\r\nexport const rejectMoviesAC = (id: string) => ({type: 'REJECT-MOVIE', id} as const)\r\n\r\n// thunks\r\nexport const fetchMoviesTC = () => {\r\n    return (dispatch: ThunkDispatch) => {\r\n        getMovies()\r\n            .then((res) => {\r\n                dispatch(setMoviesAC(res))\r\n            })\r\n    }\r\n}\r\n\r\nexport const acceptMovieTC = (id:string) => {\r\n    console.log(\"Movie \" +id+\" was accepted\")\r\n    return (dispatch: ThunkDispatch) => {\r\n        recomendationsAPI.accept(id)\r\n            .then(() => {\r\n                dispatch(acceptMoviesAC(id))\r\n            })\r\n    }\r\n}\r\n\r\nexport const rejectMovieTC = (id:string) => {\r\n    console.log(\"Movie \" +id+\" was rejectedted\")\r\n    return (dispatch: ThunkDispatch) => {\r\n        recomendationsAPI.reject(id)\r\n            .then(() => {\r\n                dispatch(rejectMoviesAC(id))\r\n            })\r\n    }\r\n}\r\n\r\n// types\r\nexport type SetMoviesActionType = ReturnType<typeof setMoviesAC>;\r\nexport type AcceptMovieActionType = ReturnType<typeof acceptMoviesAC>;\r\nexport type RejectMovieActionType = ReturnType<typeof rejectMoviesAC>;\r\ntype ActionsType = SetMoviesActionType | AcceptMovieActionType | RejectMovieActionType\r\ntype ThunkDispatch = Dispatch<ActionsType>\r\n","import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    baseURL:\r\n        'https://localhost:8080/recommendations/'\r\n});\r\n\r\n\r\nexport const recomendationsAPI = {\r\n    accept(id: string) {\r\n        return instance.put(`/${id}/accept`)},\r\n    reject(id: string) {\r\n        return instance.put(`/${id}/reject`)},\r\n};\r\n","import React from \"react\";\r\nimport {MovieType} from \"../bll/movies-reducer\";\r\nimport TinderCard from \"react-tinder-card\";\r\n\r\nexport type TinderMovieCardPropsType = {\r\n    childRefs: React.RefObject<any>[]\r\n    index: number\r\n    onSwipe: (dir: string) => void\r\n    onCardLeftScreen: () => void\r\n    movie: MovieType\r\n}\r\n\r\nconst TinderMovieCard = (props: TinderMovieCardPropsType) => {\r\n    return <TinderCard ref={props.childRefs[props.index]} className=\"swipe\"\r\n                       onSwipe={props.onSwipe} onCardLeftScreen={props.onCardLeftScreen}>\r\n        <div style={{backgroundImage: \"url(\" + props.movie.imageURL + \")\"}} className=\"card\">\r\n            <h3>{props.movie.title}</h3>\r\n        </div>\r\n    </TinderCard>;\r\n}\r\n\r\nexport default TinderMovieCard\r\n","import React, {useEffect, useMemo, useState} from 'react';\nimport './App.css';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {acceptMovieTC, fetchMoviesTC, MovieType, rejectMovieTC} from \"./bll/movies-reducer\";\nimport {AppRootStateType} from \"./bll/store\";\nimport TinderMovieCard from \"./components/TinderMovieCard\";\n\n\nfunction App() {\n    let alreadyRemoved = [] as Array<string>\n    const dispatch = useDispatch();\n    const moviesData = useSelector<AppRootStateType, Array<MovieType>>(state => state.movies)\n    const childRefs = useMemo(() => Array(moviesData.length).fill(0).map(i => React.createRef<any>()), [moviesData])\n    const [movies, setMovies] = useState(moviesData)\n    const [reviewedFilms, setReviewedFilms] = useState(alreadyRemoved)\n    let moviesState = moviesData\n\n    useEffect(() => {\n        dispatch(fetchMoviesTC());\n    }, [])\n\n    useEffect(() => {\n        setMovies(moviesState);\n    }, [moviesState])\n\n\n    const swiped = (direction: any, id: string) => {\n        reviewedFilms.push(id)\n        setReviewedFilms(reviewedFilms)\n        debugger\n        outOfFrame(id)\n        {\n            direction !== \"right\" ? rejectMovieTC(id) : acceptMovieTC(id)\n        }\n    }\n    const outOfFrame = (id: string) => {\n        moviesState = moviesState.filter(movie => movie.id !== id)\n        setMovies(moviesState)\n    }\n    const swipe = (dir: string) => {\n        const cardsLeft = movies.filter(movie => !reviewedFilms.includes(movie.id))\n        if (cardsLeft.length) {\n            const toBeRemoved = cardsLeft[cardsLeft.length - 1].id\n            const index = moviesData.map(movie => movie.id).indexOf(toBeRemoved)\n            alreadyRemoved.push(toBeRemoved)\n            setReviewedFilms(alreadyRemoved)\n            childRefs[index]?.current?.swipe(dir)\n        }\n    }\n\n\n    return (\n        <div className=\"App\">\n            <h1>Movie Tinder</h1>\n            <div className='cardContainer'>\n                {moviesState.map((movie, index) =>\n                    <TinderMovieCard key={movie.id} childRefs={childRefs} index={index}\n                                     onSwipe={(dir: any) => swiped(dir, movie.id)}\n                                     onCardLeftScreen={() => outOfFrame(movie.id)} movie={movie}/>\n                )}\n            </div>\n            {reviewedFilms.length !== moviesData.length ? <div className='buttons'>\n                <button className='button-reject' onClick={() => swipe('left')}>Reject</button>\n                <button className='button-accept' onClick={() => swipe('right')}>Accept</button>\n            </div> : <></>\n            }\n            {reviewedFilms.length !== moviesData.length ? <h2 className='infoText'>Swipe a card to the right to accept!</h2> : <h2>You've seen all the movies!</h2>}\n\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {applyMiddleware, combineReducers, createStore} from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {moviesReducer} from \"./movies-reducer\";\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    movies: moviesReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\nexport type AppRootStateType = ReturnType<typeof rootReducer>\r\n\r\n// @ts-ignore\r\nwindow.store = store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {store} from \"./bll/store\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n    <App />\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}